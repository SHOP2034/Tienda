<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Tienda</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<style>
  body { margin:0; padding:0; font-family: Arial, sans-serif; transition: background 0.3s; }
  #header { text-align:center; padding:15px; }
  #logoStore { width:120px; height:120px; object-fit:cover; border-radius:10px; margin:0 auto 10px; display:block; }
  #logoSearch { width:60px; height:60px; object-fit:cover; border-radius:10px; display:block; margin:10px auto; }
  #buttons { display:flex; justify-content:center; flex-wrap:wrap; gap:10px; margin:10px 0; }
  .btn { padding:10px 15px; border:none; border-radius:8px; font-size:16px; cursor:pointer; color:#fff; text-decoration:none; display:inline-block; }
  #map { height:300px; border-radius:10px; margin:10px; }
</style>
</head>
<body>
<div id="header">
  <img id="logoStore" src="" alt="Logo Tienda" />
  <img id="logoSearch" src="" alt="Logo Buscador" />
</div>
<div id="buttons"></div>
<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
fetch('config.json')
  .then(r => r.ok ? r.json() : {})
  .then(cfg => {
    document.body.style.background = cfg.bgColor || '#fff';

    if (cfg.logoStore) document.getElementById('logoStore').src = cfg.logoStore;
    if (cfg.logoSearch) document.getElementById('logoSearch').src = cfg.logoSearch;

    const makeBtn = (text, url) => {
      const a = document.createElement('a');
      a.className = 'btn';
      a.textContent = text;
      a.href = url;
      a.style.background = cfg.btnColor || '#28a745';
      a.style.color = cfg.textColor || '#fff';
      a.target = '_blank';
      document.getElementById('buttons').appendChild(a);
    };

    if (cfg.showWhatsapp && cfg.whatsapp) makeBtn('WhatsApp', `https://wa.me/${cfg.whatsapp.replace(/\D/g,'')}`);
    if (cfg.showInstagram && cfg.instagram) makeBtn('Instagram', cfg.instagram);
    if (cfg.showFacebook && cfg.facebook) makeBtn('Facebook', cfg.facebook);
    if (cfg.showEmail && cfg.email) makeBtn('Email', `mailto:${cfg.email}`);
    if (cfg.showTelefono && cfg.phone) makeBtn('Teléfono', `tel:${cfg.phone}`);

    if (cfg.showMap && cfg.lat && cfg.lng) {
      const map = L.map('map').setView([cfg.lat, cfg.lng], 15);
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{maxZoom:19}).addTo(map);
      L.marker([cfg.lat, cfg.lng]).addTo(map).bindPopup(cfg.address || 'Ubicación');
    } else {
      document.getElementById('map').style.display = 'none';
    }
  });
</script>
</body>
</html>